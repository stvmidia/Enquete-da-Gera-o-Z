
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enquete em Tempo Real</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f4f4f9;
            --text-color: #2c3e50;
            --primary-color: #3498db;
            --primary-hover: #2980b9;
            --input-bg: #ffffff;
            --border-color: #dddddd;
            --bar-a-color: #3498db;
            --bar-b-color: #2ecc71;
            --bar-c-color: #e67e22;
            --bar-d-color: #9b59b6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            text-align: center;
            padding: 20px;
            min-height: 100vh;
            overflow-y: auto;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding: 30px;
            margin: 2vh auto 0;
        }

        #app-content, #final-screen {
            width: 100%;
        }

        h1 {
            font-size: 3.2rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
        }

        #question-counter {
            font-size: 1.5rem;
            font-weight: 300;
            margin-bottom: 1rem;
            color: #555;
        }

        #question-text {
            font-size: 2.4rem;
            min-height: 120px;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
            text-align: left;
        }

        .option-item {
            font-size: 1.8rem;
            padding: 1rem;
            background-color: var(--input-bg);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            border-left: 5px solid #bdc3c7;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s, border-color 0.3s;
            user-select: none; /* Prevent text selection on click */
        }

        .option-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .option-item.selected {
            border-left-color: var(--primary-color);
            background-color: #eaf5fc;
            font-weight: bold;
        }

        .options-grid.locked .option-item {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .options-grid.locked .option-item:hover {
            transform: none;
            box-shadow: none;
        }

        .options-grid.locked .option-item.selected {
            opacity: 1;
        }

        .option-text strong {
            margin-right: 1rem;
        }
        
        .vote-counter {
            display: none;
        }
        
        #action-section {
            margin: 2rem 0;
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .button {
            padding: 1rem 2rem;
            font-size: 1.8rem;
            font-weight: bold;
            cursor: pointer;
            border: none;
            border-radius: 10px;
            color: white;
            background-color: var(--primary-color);
            transition: background-color 0.3s ease;
            min-height: 70px;
            display: inline-flex;
            align-items: center;
        }

        .button:hover {
            background-color: var(--primary-hover);
        }
        
        #student-vote-counter {
            margin-left: 10px;
            font-weight: 400;
            font-size: 1.6rem;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 4px 10px;
            border-radius: 5px;
        }
        
        #results-container {
            width: 100%;
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .result-item {
            text-align: left;
        }
        
        .result-info {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .option-result-text {
            font-size: 1.8rem;
            font-weight: 500;
        }

        .vote-info-text {
            font-size: 1.6rem;
            font-weight: bold;
            color: #333;
            white-space: nowrap;
        }
        
        .result-bar-wrapper {
            width: 100%;
            background-color: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }
        
        .result-bar {
            height: 40px;
            width: 0%;
            color: white;
            transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1);
        }
        
        #bar-a { background-color: var(--bar-a-color); }
        #bar-b { background-color: var(--bar-b-color); }
        #bar-c { background-color: var(--bar-c-color); }
        #bar-d { background-color: var(--bar-d-color); }

        .hidden {
            display: none !important;
        }

        #final-screen h1 {
            font-size: 4rem;
        }
        
        #final-summary-container h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: var(--text-color);
        }
        
        .pillar-summary-item {
            margin-bottom: 1.5rem;
        }

        .final-bar {
            height: 60px;
            width: 0%;
            display: flex;
            align-items: center;
            padding-left: 20px;
            transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1);
            border-radius: 0 10px 10px 0;
            color: white;
            font-weight: bold;
            font-size: 1.6rem;
            white-space: nowrap;
        }
        
        .pillar-description {
            font-size: 1.4rem;
            color: #555;
            text-align: left;
            margin-top: 0.5rem;
            padding: 0 5px;
        }

        #navigation-section {
            margin-top: 2rem;
        }
        
        #home-button {
            margin-top: 2rem;
        }

        @media (max-width: 900px) {
            .container {
                padding: 20px;
            }
            h1 { font-size: 3rem; }
            #question-text { font-size: 2.2rem; min-height: 120px; }
            .options-grid { grid-template-columns: 1fr; gap: 1rem; }
            .option-item { font-size: 1.8rem; }
            .button { font-size: 2rem; padding: 1rem 2rem; }
            .result-bar { height: 50px; }
            .option-result-text { font-size: 1.6rem; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="app-content">
            <h1 id="app-title">Enquete da Gera√ß√£o Z</h1>
             <div id="navigation-section" class="navigation-section">
                 <button id="next-button" class="button hidden">Pr√≥xima Pergunta ‚Üí</button>
            </div>
            <p id="question-counter"></p>
            <p id="question-text"></p>

            <div class="options-grid" id="options-container">
                <div class="option-item" id="option-a" data-option="a">
                    <div class="option-text"></div>
                    <span class="vote-counter">0</span>
                </div>
                 <div class="option-item" id="option-b" data-option="b">
                    <div class="option-text"></div>
                    <span class="vote-counter">0</span>
                </div>
                 <div class="option-item" id="option-c" data-option="c">
                    <div class="option-text"></div>
                    <span class="vote-counter">0</span>
                </div>
                 <div class="option-item" id="option-d" data-option="d">
                    <div class="option-text"></div>
                    <span class="vote-counter">0</span>
                </div>
            </div>
            
            <div id="action-section">
                <button id="next-student-button" class="button hidden">Pr√≥ximo Aluno <span id="student-vote-counter"></span></button>
                <button id="generate-button" class="button">üìä Gerar Resultado</button>
            </div>
            
            <div id="results-container" class="hidden">
                <div class="result-item">
                    <div class="result-info">
                        <p class="option-result-text" id="result-text-a"></p>
                        <p class="vote-info-text" id="vote-info-a"></p>
                    </div>
                    <div class="result-bar-wrapper"><div class="result-bar" id="bar-a"></div></div>
                </div>
                <div class="result-item">
                    <div class="result-info">
                        <p class="option-result-text" id="result-text-b"></p>
                        <p class="vote-info-text" id="vote-info-b"></p>
                    </div>
                    <div class="result-bar-wrapper"><div class="result-bar" id="bar-b"></div></div>
                </div>
                <div class="result-item">
                    <div class="result-info">
                        <p class="option-result-text" id="result-text-c"></p>
                        <p class="vote-info-text" id="vote-info-c"></p>
                    </div>
                    <div class="result-bar-wrapper"><div class="result-bar" id="bar-c"></div></div>
                </div>
                <div class="result-item">
                    <div class="result-info">
                        <p class="option-result-text" id="result-text-d"></p>
                        <p class="vote-info-text" id="vote-info-d"></p>
                    </div>
                    <div class="result-bar-wrapper"><div class="result-bar" id="bar-d"></div></div>
                </div>
            </div>

        </div>

        <div id="final-screen" class="hidden">
            <h1>Pesquisa Conclu√≠da!</h1>
            <p style="font-size: 2rem; margin-bottom: 2rem;">Obrigado por participar.</p>
            <div id="final-summary-container" style="width: 100%;"></div>
            <button id="home-button" class="button">üè† In√≠cio</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
                {
                    pillar: "Trabalho",
                    question: "O que √© mais importante para voc√™ em uma carreira futura?",
                    options: {
                        a: "Um prop√≥sito forte, mesmo com sal√°rio menor.",
                        b: "Estabilidade financeira e um bom sal√°rio.",
                        c: "Flexibilidade de hor√°rios e home office.",
                        d: "Oportunidades r√°pidas de crescimento."
                    }
                },
                {
                    pillar: "Casa Pr√≥pria",
                    question: "Pensando no futuro, qual seu maior desejo?",
                    options: {
                        a: "Comprar minha casa pr√≥pria o mais cedo poss√≠vel.",
                        b: "Investir em viagens e experi√™ncias de vida.",
                        c: "Morar de aluguuel para ter liberdade de mudar.",
                        d: "Abrir meu pr√≥prio neg√≥cio ou investir."
                    }
                },
                {
                    pillar: "Autonomia",
                    question: "Com que idade voc√™ se imagina saindo da casa dos seus pais?",
                    options: {
                        a: "Logo ap√≥s terminar o Ensino M√©dio.",
                        b: "Depois de concluir uma faculdade.",
                        c: "Somente quando tiver total independ√™ncia financeira.",
                        d: "N√£o tenho pressa, gosto da vida em fam√≠lia."
                    }
                },
                {
                    pillar: "Sa√∫de Mental",
                    question: "Como voc√™ lida com ansiedade e estresse?",
                    options: {
                        a: "Converso abertamente com amigos e fam√≠lia.",
                        b: "Prefiro guardar para mim e resolver sozinho.",
                        c: "Busco ajuda profissional ou pesquiso online.",
                        d: "Uso hobbies, esportes ou jogos para me distrair."
                    }
                },
                {
                    pillar: "Planos de Fam√≠lia",
                    question: "Sobre ter filhos no futuro, voc√™ pensa em...",
                    options: {
                        a: "Ter filhos mais jovem, √© uma prioridade.",
                        b: "Ter filhos apenas ap√≥s estabilizar a carreira.",
                        c: "N√£o ter filhos, para focar em outros objetivos.",
                        d: "Ainda n√£o sei, √© uma decis√£o para o futuro."
                    }
                },
                {
                    pillar: "Preocupa√ß√£o Clim√°tica",
                    question: "As mudan√ßas clim√°ticas influenciam suas escolhas di√°rias?",
                    options: {
                        a: "Muito, busco ativamente ser mais sustent√°vel.",
                        b: "Um pouco, fa√ßo o b√°sico como reciclar.",
                        c: "Pouco, acredito ser um problema para governos.",
                        d: "Nada, tenho outras preocupa√ß√µes mais urgentes."
                    }
                },
                 {
                    pillar: "Vida Digital",
                    question: "Sua vida online (redes sociais, jogos) √© mais uma fonte de...?",
                    options: {
                        a: "Conex√£o com amigos e divers√£o.",
                        b: "Press√£o por apar√™ncia e conquistas.",
                        c: "Informa√ß√£o, not√≠cias e aprendizado.",
                        d: "Distra√ß√£o e uma forma de passar o tempo."
                    }
                },
                {
                    pillar: "Trabalho",
                    question: "Qual modelo de trabalho voc√™ prefere?",
                    options: {
                        a: "Um emprego tradicional (CLT) em uma empresa.",
                        b: "Ser aut√¥nomo ou freelancer.",
                        c: "Abrir e gerenciar meu pr√≥prio neg√≥cio.",
                        d: "Trabalhar para uma startup inovadora."
                    }
                },
                {
                    pillar: "Sa√∫de Mental",
                    question: "Voc√™ se sentiria confort√°vel em faltar √† aula/trabalho por um dia de estresse mental?",
                    options: {
                        a: "Sim, sa√∫de mental √© t√£o importante quanto a f√≠sica.",
                        b: "N√£o, acharia que √© uma desculpa ou fraqueza.",
                        c: "Talvez, mas com medo de ser julgado.",
                        d: "Sim, mas n√£o diria o motivo real."
                    }
                },
                {
                    pillar: "Casa Pr√≥pria",
                    question: "Para voc√™, o que significa 'ter sucesso' na vida adulta?",
                    options: {
                        a: "Ter uma casa e um carro quitados.",
                        b: "Ter liberdade para viajar e trabalhar de onde quiser.",
                        c: "Ter um impacto positivo na comunidade.",
                        d: "Estar feliz e mentalmente saud√°vel, independente do dinheiro."
                    }
                },
                {
                    pillar: "Planos de Fam√≠lia",
                    question: "O conceito de casamento tradicional √© importante para voc√™?",
                    options: {
                        a: "Sim, sonho em casar na igreja e formar uma fam√≠lia.",
                        b: "Sim, mas prefiro uma cerim√¥nia mais moderna e pessoal.",
                        c: "N√£o, prefiro morar junto sem formalidades.",
                        d: "N√£o √© uma prioridade na minha vida."
                    }
                },
                {
                    pillar: "Vida Digital",
                    question: "Qual o impacto das redes sociais na sua auto-estima?",
                    options: {
                        a: "Positivo, me sinto conectado e inspirado.",
                        b: "Negativo, muitas vezes me comparo com os outros.",
                        c: "Neutro, uso de forma consciente e controlada.",
                        d: "Varia muito, depende do dia e do conte√∫do."
                    }
                }
            ];

            let currentQuestionIndex = 0;
            let allResults = [];
            let currentVotes = { a: 0, b: 0, c: 0, d: 0 };
            let studentHasVoted = false;
            let studentVoteCount = 0;

            const questionCounterEl = document.getElementById('question-counter');
            const questionTextEl = document.getElementById('question-text');
            
            const optionItems = document.querySelectorAll('.option-item');
            const voteCounters = document.querySelectorAll('.vote-counter');

            const actionSection = document.getElementById('action-section');
            const resultsContainer = document.getElementById('results-container');
            const optionsContainer = document.getElementById('options-container');

            const bars = {
                a: document.getElementById('bar-a'),
                b: document.getElementById('bar-b'),
                c: document.getElementById('bar-c'),
                d: document.getElementById('bar-d'),
            };

            const resultTexts = {
                a: document.getElementById('result-text-a'),
                b: document.getElementById('result-text-b'),
                c: document.getElementById('result-text-c'),
                d: document.getElementById('result-text-d'),
            };

            const voteInfos = {
                a: document.getElementById('vote-info-a'),
                b: document.getElementById('vote-info-b'),
                c: document.getElementById('vote-info-c'),
                d: document.getElementById('vote-info-d'),
            };
            
            const generateButton = document.getElementById('generate-button');
            const nextButton = document.getElementById('next-button');
            const nextStudentButton = document.getElementById('next-student-button');
            const studentVoteCounterEl = document.getElementById('student-vote-counter');
            
            const appContentEl = document.getElementById('app-content');
            const finalScreenEl = document.getElementById('final-screen');
            const homeButton = document.getElementById('home-button');

            function resetForNextStudent() {
                studentHasVoted = false;
                optionItems.forEach(item => item.classList.remove('selected'));
                optionsContainer.classList.remove('locked');
                nextStudentButton.classList.add('hidden');
            }

            function loadQuestion(index) {
                resultsContainer.classList.add('hidden');
                actionSection.classList.remove('hidden');
                optionsContainer.classList.remove('hidden');
                
                Object.values(bars).forEach(bar => {
                    bar.style.width = '0%';
                });

                currentVotes = { a: 0, b: 0, c: 0, d: 0 };
                studentVoteCount = 0;
                studentVoteCounterEl.textContent = '';
                voteCounters.forEach(counter => counter.textContent = '0');
                resetForNextStudent();
                nextButton.classList.add('hidden');
                generateButton.classList.remove('hidden');

                const question = questions[index];
                questionCounterEl.textContent = `Pergunta ${index + 1} de ${questions.length}`;
                questionTextEl.textContent = question.question;
                
                document.querySelector('#option-a .option-text').innerHTML = `<strong>A)</strong> ${question.options.a}`;
                document.querySelector('#option-b .option-text').innerHTML = `<strong>B)</strong> ${question.options.b}`;
                document.querySelector('#option-c .option-text').innerHTML = `<strong>C)</strong> ${question.options.c}`;
                document.querySelector('#option-d .option-text').innerHTML = `<strong>D)</strong> ${question.options.d}`;
            }
            
            function handleVote(optionKey) {
                if (studentHasVoted) {
                    return; // Prevent multiple votes from one student
                }
                studentHasVoted = true;
                
                currentVotes[optionKey]++;
                studentVoteCount++;
                
                studentVoteCounterEl.textContent = `(${studentVoteCount} ${studentVoteCount === 1 ? 'aluno votou' : 'alunos votaram'})`;
                
                document.getElementById(`option-${optionKey}`).classList.add('selected');
                optionsContainer.classList.add('locked');
                
                nextStudentButton.classList.remove('hidden');
            }

            function generateResults() {
                const { a: votesA, b: votesB, c: votesC, d: votesD } = currentVotes;
                const totalVotes = votesA + votesB + votesC + votesD;

                if (totalVotes === 0) {
                    alert("Nenhum voto foi registrado. Toque em uma op√ß√£o para votar.");
                    return;
                }
                
                const currentPillar = questions[currentQuestionIndex].pillar;
                allResults.push({ pillar: currentPillar, votes: totalVotes });

                actionSection.classList.add('hidden');
                optionsContainer.classList.add('hidden');
                resultsContainer.classList.remove('hidden');

                const percA = (totalVotes > 0) ? (votesA / totalVotes) * 100 : 0;
                const percB = (totalVotes > 0) ? (votesB / totalVotes) * 100 : 0;
                const percC = (totalVotes > 0) ? (votesC / totalVotes) * 100 : 0;
                const percD = (totalVotes > 0) ? (votesD / totalVotes) * 100 : 0;

                const question = questions[currentQuestionIndex];

                const resultsData = [
                    { bar: bars.a, textEl: resultTexts.a, voteEl: voteInfos.a, text: `A) ${question.options.a}`, votes: votesA, perc: percA.toFixed(1) },
                    { bar: bars.b, textEl: resultTexts.b, voteEl: voteInfos.b, text: `B) ${question.options.b}`, votes: votesB, perc: percB.toFixed(1) },
                    { bar: bars.c, textEl: resultTexts.c, voteEl: voteInfos.c, text: `C) ${question.options.c}`, votes: votesC, perc: percC.toFixed(1) },
                    { bar: bars.d, textEl: resultTexts.d, voteEl: voteInfos.d, text: `D) ${question.options.d}`, votes: votesD, perc: percD.toFixed(1) },
                ];

                resultsData.forEach(data => {
                    data.textEl.textContent = data.text;
                    data.voteEl.textContent = `${data.votes} votos (${data.perc}%)`;
                });

                setTimeout(() => {
                    resultsData.forEach(data => {
                        data.bar.style.width = `${data.perc}%`;
                    });
                    nextButton.classList.remove('hidden');
                }, 100);
            }

            function showNextQuestion() {
                currentQuestionIndex++;
                if (currentQuestionIndex < questions.length) {
                    loadQuestion(currentQuestionIndex);
                } else {
                    displayFinalSummary();
                    appContentEl.classList.add('hidden');
                    finalScreenEl.classList.remove('hidden');
                }
            }
            
            function displayFinalSummary() {
                const pillarTotals = {};
                allResults.forEach(result => {
                    if (pillarTotals[result.pillar]) {
                        pillarTotals[result.pillar] += result.votes;
                    } else {
                        pillarTotals[result.pillar] = result.votes;
                    }
                });
                
                const pillarDescriptions = {
                    "Trabalho": "Reflete a busca por prop√≥sito, estabilidade e flexibilidade na carreira.",
                    "Casa Pr√≥pria": "Mede o desejo pela casa pr√≥pria em compara√ß√£o com outras experi√™ncias e investimentos.",
                    "Autonomia": "Indica a idade e as condi√ß√µes ideais para a independ√™ncia financeira e residencial.",
                    "Sa√∫de Mental": "Mostra a import√¢ncia do bem-estar emocional e a abertura para discutir o tema.",
                    "Planos de Fam√≠lia": "Explora as prioridades e os novos conceitos sobre casamento e filhos.",
                    "Preocupa√ß√£o Clim√°tica": "Avalia o n√≠vel de consci√™ncia e a√ß√£o em rela√ß√£o √†s quest√µes ambientais.",
                    "Vida Digital": "Analisa o impacto das redes sociais e da vida online no bem-estar e nas rela√ß√µes."
                };

                const summaryContainer = document.getElementById('final-summary-container');
                summaryContainer.innerHTML = '<h2>Resultados Gerais por Pilar</h2>';

                let pillarEntries = Object.entries(pillarTotals);
                
                // Sort pillars by votes in descending order
                pillarEntries.sort(([, votesA], [, votesB]) => votesB - votesA);
                
                const maxVotes = pillarEntries.length > 0 ? pillarEntries[0][1] : 0;
                
                const pillarColors = ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#fbc02d', '#a65628'];

                pillarEntries.forEach(([pillar, votes], index) => {
                    const percentage = (maxVotes > 0) ? (votes / maxVotes) * 100 : 0;
                    const color = pillarColors[index % pillarColors.length];
                    
                    const itemContainer = document.createElement('div');
                    itemContainer.className = 'pillar-summary-item';

                    const wrapper = document.createElement('div');
                    wrapper.className = 'result-bar-wrapper';

                    const bar = document.createElement('div');
                    bar.className = 'final-bar';
                    bar.style.backgroundColor = color;
                    bar.textContent = `#${index + 1} - ${pillar}: ${votes} votos`;
                    
                    const description = document.createElement('p');
                    description.className = 'pillar-description';
                    description.textContent = pillarDescriptions[pillar] || '';

                    wrapper.appendChild(bar);
                    itemContainer.appendChild(wrapper);
                    itemContainer.appendChild(description);
                    summaryContainer.appendChild(itemContainer);

                    setTimeout(() => {
                        bar.style.width = `${percentage}%`;
                    }, 100 * (index + 1));
                });
            }

            function restartApp() {
                currentQuestionIndex = 0;
                allResults = [];
                
                finalScreenEl.classList.add('hidden');
                appContentEl.classList.remove('hidden');

                loadQuestion(currentQuestionIndex);
            }

            optionItems.forEach(item => {
                item.addEventListener('click', () => handleVote(item.dataset.option));
            });
            generateButton.addEventListener('click', generateResults);
            nextButton.addEventListener('click', showNextQuestion);
            nextStudentButton.addEventListener('click', resetForNextStudent);
            homeButton.addEventListener('click', restartApp);

            // Initial load
            loadQuestion(currentQuestionIndex);
        });
    </script>
</body>
</html>
